<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Changelog &mdash; cn-ws  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Credits" href="authors.html" />
    <link rel="prev" title="Contributing" href="contributing.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            cn-ws
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="model.html">Model Description</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Model Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#version-4-2-3">Version 4.2.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-4-2-2">Version 4.2.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-4-2-1">Version 4.2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-4-2-0">version 4.2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-4-1-0">version 4.1.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-4-0-0">version 4.0.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-3-0-0">version 3.0.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-2-1-0">version 2.1.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-2-0-0">version 2.0.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-1-4-0">version 1.4.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-1-3-0">version 1.3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-1-2-0">version 1.2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-1-1-0">version 1.1.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-1-0-0">Version 1.0.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">cn-ws</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Changelog</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/cn-ws/cn-ws/blob/master/docs/changelog.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="contributing.html" class="btn btn-neutral float-left" title="Contributing" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="authors.html" class="btn btn-neutral float-right" title="Credits" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="changelog">
<span id="changes"></span><h1>Changelog<a class="headerlink" href="#changelog" title="Permalink to this heading"></a></h1>
<div class="section" id="version-4-2-3">
<h2>Version 4.2.3<a class="headerlink" href="#version-4-2-3" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Multiple additions/corrections to the documentation.</p></li>
<li><p>Fix of routing to sewers-bug introduced in CN in version 4.2.0
(see 6735f759b5029c63a4531e96aa823484722e48b3). Discharge observed in
segments is now correct again.</p></li>
<li><p>Add GitHub actions.</p></li>
</ul>
</div>
<div class="section" id="version-4-2-2">
<h2>Version 4.2.2<a class="headerlink" href="#version-4-2-2" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Implements option that allows only cardinal routing to the river. This
option is usefull to avoid ordinal routing between two grass strip pixels.
As a consequency, the cardinal routing is a way to maximize impact of grass
strip pixels in the simulation.</p></li>
</ul>
</div>
<div class="section" id="version-4-2-1">
<h2>Version 4.2.1<a class="headerlink" href="#version-4-2-1" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add parcel connectivity grasstrips as a parameter.</p></li>
<li><p>Write ‘routing_missing.txt’ only when ‘write routing table’ is enabled in
the ini-file.</p></li>
<li><p>Disable option to calculate R-factor in CN-WS, referring to the R-factor
python package: <a class="reference external" href="https://cn-ws.github.io/rfactor/index.html">https://cn-ws.github.io/rfactor/index.html</a>.</p></li>
<li><p>Enable install with cn_ws with conda.</p></li>
<li><p>Several documentation updates, additions and clarifications.</p></li>
<li><p>Refactoring code</p></li>
</ul>
</div>
<div class="section" id="version-4-2-0">
<h2>version 4.2.0<a class="headerlink" href="#version-4-2-0" title="Permalink to this heading"></a></h2>
<ul>
<li><p>Extending documentation</p></li>
<li><p>Bugfix routing: if both targets have a different land cover than the source
pixel, and the highest target is a gras strip, than route to the other target.</p></li>
<li><p>Renamed model binaries and folder structure:</p>
<blockquote>
<div><ul class="simple">
<li><p>console version: CN_WSModel &gt; cn_ws</p></li>
<li><p>gui version: CN_WS &gt; cn_ws_gui</p></li>
<li><p>LT version: CN_WS_LongTerm &gt; cn_ws_gui_LT</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Moved logic of lpr file to a separate .pas file</p></li>
<li><p>Remove spurious warnings when building the binary</p></li>
<li><p>remove VHA tag in files:</p>
<blockquote>
<div><ul class="simple">
<li><p>The option “Output per VHA river segment” became “Output per river segment”</p></li>
<li><p>Discharge_VHA.txt was renamed to Discharge_segments.txt</p></li>
<li><p>Total sediment VHA.txt was renamed to Total sediment segments.txt</p></li>
<li><p>Cumulative sediment VHA.txt was renamed to Cumulative sediment segments.txt</p></li>
<li><p>Sediment_VHA.txt was renamed to Sediment_segments.txt</p></li>
<li><p>Sediment concentration_VHA.txt was renamed to Sediment concentration segments.txt</p></li>
<li><p>Clay content sediment VHA.txt was renamed to Clay content sediment segments.txt</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Enable the output per segment option by default when river routing is used</p></li>
<li><p>Make content of Total Sediment.txt dependent on used options in ini-file</p></li>
<li><dl class="simple">
<dt>Correct tillage erosion:</dt><dd><ul class="simple">
<li><p>sin –&gt; tan in formula Van Oost et al., (2000)</p></li>
<li><p>use the same routing for tillage erosion as in the water erosion</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Add SEDTIL_IN and SEDTIL_OUT-files to output</p></li>
<li><p>Bugfix: do not overwrite determined routing for buffer pixels with standard routing</p></li>
<li><p>Bugfix: reduce uparea from buffer outlet pixel when Buffer reduce area is enabled</p></li>
<li><p>Add file rfactor.txt to modeloutput when the rfactor is calculated from a rainfall timeseries</p></li>
<li><p>adjusting sewer routing CN to current sewer routing WS.</p></li>
<li><p>Enable option to input precomputed R-factor for a single event in CN-WS.</p></li>
<li><p>Make CN-WS compatible with SAGA-grids (new option).</p></li>
<li><p>Make integer rasters int32-compatible (requires Freepascal 3.2): this opens the option to run
larger catchments (with int16, the number of parcels are limited to 32768).</p></li>
<li><p>Correct calculation S-factor Desmet (use tan in stead of arctan)</p></li>
</ul>
</div>
<div class="section" id="version-4-1-0">
<h2>version 4.1.0<a class="headerlink" href="#version-4-1-0" title="Permalink to this heading"></a></h2>
<p>This version was delivered to VMM at the end of the NEMO project. It includes
some small improvements and a fix for a bug discovered by Jan Coppens (Thanks!)</p>
<ul class="simple">
<li><p>Allow relative paths in ini-file</p></li>
<li><p>Simplify logic in CN_WSmodel.lpr</p></li>
<li><p>Make bufferparameters ‘Volume’, ‘Height Dam’, ‘Height opening’, ‘Opening area’,
‘Discharge coefficient’, ‘Width dam’ only mandatory in ini-file when using the
CN module</p></li>
<li><p>Bugfix: Set Target2 to -99 when Part2 is 0 (as is done for Target1)</p></li>
<li><p>Added TC formula of Verstraeten et al 2007 as an option</p></li>
<li><p>Bugfix: Renaming SModel Desmet1996 to McCool1987</p></li>
<li><p>Extending documentation</p></li>
</ul>
</div>
<div class="section" id="version-4-0-0">
<h2>version 4.0.0<a class="headerlink" href="#version-4-0-0" title="Permalink to this heading"></a></h2>
<p>This version includes several changes needed for CNWS to be compatible with the
NEMO model of VMM (see
<a class="reference external" href="https://www.vmm.be/water/kwaliteit-waterlopen/waterkwaliteitsmodellen/nemo_tw.pdf/&#64;&#64;download/file/NEMO_TW.pdf">https://www.vmm.be/water/kwaliteit-waterlopen/waterkwaliteitsmodellen/nemo_tw.pdf/&#64;&#64;download/file/NEMO_TW.pdf</a>
)</p>
<ul class="simple">
<li><p>Change type of parcel raster to integer</p></li>
<li><p>Overwrite the system decimal separator to ‘.’ cn_ws can now be used for both a
float comma and point decimal system</p></li>
<li><p>Add documentation with sphinx</p></li>
<li><p>Don’t write Total Sediment.txt when calibrating</p></li>
<li><p>Bugfix: read outlet raster when ‘Manual outlet selection’ is enabled</p></li>
<li><p>Improving memory management (releasing memory of rasters when they are not used anymore)</p></li>
<li><p>Change buffer extension ID to buffer_id + 16384</p></li>
<li><p>Routing: do not jump to border pixels of raster in findlower function</p></li>
<li><p>Removing ‘Sediment trapped in open water’ from Total sediment.txt</p></li>
<li><p>Round sewer input in Total sediment.txt to two decimals</p></li>
<li><p>Cleaning code: removing initialisation of unused variables</p></li>
<li><p>Determine outlet after routing when ‘Manual outlet selection’ is enabled</p></li>
<li><p>Refactoring: rename variable FLUX_IN to UpArea</p></li>
<li><p>Use sewermap to reduce uparea</p></li>
<li><p>Add optional LS correction factor</p></li>
</ul>
</div>
<div class="section" id="version-3-0-0">
<h2>version 3.0.0<a class="headerlink" href="#version-3-0-0" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>do not route sewers to rivers</p></li>
<li><p>reduce sediout of sewer pixel with fraction defined in sewermap</p></li>
<li><p>write capacity to raster</p></li>
<li><p>removing outputfile ‘Sewer output sediment.txt’</p></li>
<li><p>Adding ‘Sediment entering sewer system’ to Total sediment.txt</p></li>
<li><p>Bugfix: typo in variable name (2nd target vs 1st target)</p></li>
<li><p>If Target is -99 set distance to 0 in routing table</p></li>
<li><p>Change option ‘Include tillage’ to ‘Include tillage direction’</p></li>
<li><p>Make calculation of tillage erosion optional</p></li>
<li><p>Change Fluxout from RRaster to single value</p></li>
<li><p>Ring checking</p></li>
<li><p>Use function to find lower pixel</p></li>
<li><p>Update routing algorithm (inverse routing)</p></li>
<li><p>Allow to stop routing algorithm in rivers and outlets</p></li>
<li><p>After using ‘dedicated’ routing in ditch, dam or buffer make sure to use
‘normal’ routing algorithm</p></li>
<li><p>Reduce upstream area with trapping efficiency of buffer</p></li>
</ul>
</div>
<div class="section" id="version-2-1-0">
<h2>version 2.1.0<a class="headerlink" href="#version-2-1-0" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Add option ‘Only Routing’</p></li>
<li><p>Make routing table an optional output</p></li>
<li><p>Endtime model variable is now only mandatory in ini-file when needed</p></li>
<li><p>Add check to make sure number of river segments in rasters and files are
the same</p></li>
<li><p>Set the ktc value of a dam to ktc_low instead of 7</p></li>
<li><p>Flow to neighbour river cell even if that cell is higher as the origin</p></li>
<li><p>Make sure that sediment transport uses the same routing as upstream area</p></li>
<li><p>Fix calculation of distance between source and target (wrong in peculiar cases)</p></li>
<li><p>Use river direction as input for river routing</p></li>
<li><p>Write sewer export to rasterfile</p></li>
<li><p>Add files to build a package on debian linux (for deploy on notebook server)</p></li>
</ul>
</div>
<div class="section" id="version-2-0-0">
<h2>version 2.0.0<a class="headerlink" href="#version-2-0-0" title="Permalink to this heading"></a></h2>
<p>Version used for calibration with an updated version of the digital elevation
model of Flanders (DHMVII).</p>
<ul class="simple">
<li><p>Add calculation of cumulative river sediment</p></li>
<li><p>Don’t write empty routing lines in routing.txt, use tab separation</p></li>
<li><p>Use proportion for upstream edges</p></li>
</ul>
</div>
<div class="section" id="version-1-4-0">
<h2>version 1.4.0<a class="headerlink" href="#version-1-4-0" title="Permalink to this heading"></a></h2>
<p>This version was made for the third steering group of the ‘calibration DHMVII
project’.</p>
<ul class="simple">
<li><p>remove name of ini-file from files-section in ini-file</p></li>
<li><p>add option ‘Buffer reduce area’</p></li>
<li><p>enabling range checking to avoid errors</p></li>
<li><p>PTEF is changed to base-100 (percentage) while it used to be 1-based</p></li>
<li><p>Remove sediment trapping in open water (-5 in parcel map) pixels and assign
ktc 9999 to those pixels</p></li>
<li><p>bugfix to prevent out of range when calculating adjusted slope</p></li>
<li><p>Change ktc values to float (previously integer) and adapt calibration
accordingly</p></li>
<li><p>Skip ktc low values higher than ktc high in calibration mode</p></li>
<li><p>Adding Force Routing option</p></li>
<li><p>Don’t route cells without lower cells to themselves</p></li>
<li><p>Improved error message when input directory is missing</p></li>
<li><p>Add River Routing option</p></li>
<li><p>Change default value of Create ktc map to True</p></li>
<li><p>Refactoring code</p></li>
<li><p>Numerous model simplifications</p></li>
</ul>
</div>
<div class="section" id="version-1-3-0">
<h2>version 1.3.0<a class="headerlink" href="#version-1-3-0" title="Permalink to this heading"></a></h2>
<p>This version was made for the second steering group of the ‘calibration DHMVII
project’.</p>
<ul class="simple">
<li><p>Use adjusted slope calculation in LS calculation</p></li>
<li><p>Restructure code so slope and aspect are calculated once, instead of twice</p></li>
<li><p>Add -9999 as no data value in all output rasters</p></li>
<li><p>Improve memory allocation for rasters</p></li>
<li><p>Refactoring code to read idrisi rasters</p></li>
</ul>
</div>
<div class="section" id="version-1-2-0">
<h2>version 1.2.0<a class="headerlink" href="#version-1-2-0" title="Permalink to this heading"></a></h2>
<p>This version was made for the first steering group of the ‘calibration DHVMII
project’.</p>
<ul class="simple">
<li><p>raise exception when ini-file does not exist</p></li>
<li><p>make key words in ini-file of LT version the same as in other version</p></li>
<li><p>bugfix: distance calculation near buffers</p></li>
<li><p>write routing table as output of console version</p></li>
<li><p>raise exception if no outlet is present in outletmap</p></li>
<li><p>add search radius to ini-file (make it a variable, not a constant)</p></li>
<li><p>add calibration method (loop over all combinations of ktc low and ktc high in
a certain amount of steps and write output to calibration.txt)</p></li>
<li><p>add functionality to use different L (Desmet1996_Vanoost2003 and
Desmet1996_McCool) and S models (Desmet1996, Nearing1997)</p></li>
<li><p>return non-zero on unsuccessful exit</p></li>
<li><p>refactoring and cleaning code</p></li>
<li><p>amount of sediment at outlet is now calculated as sum of incoming sediment
in the segment that contains the outlet</p></li>
</ul>
</div>
<div class="section" id="version-1-1-0">
<h2>version 1.1.0<a class="headerlink" href="#version-1-1-0" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>three code bases (gui, console and long-term version) are merged to a
common code base</p></li>
<li><p>add function to write routing table</p></li>
<li><p>correct distance calculation</p></li>
<li><p>improved exception handling</p></li>
<li><p>cleaning code</p></li>
</ul>
</div>
<div class="section" id="version-1-0-0">
<h2>Version 1.0.0<a class="headerlink" href="#version-1-0-0" title="Permalink to this heading"></a></h2>
<p>Initial version of CN-WS, as developed at KU Leuven.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="contributing.html" class="btn btn-neutral float-left" title="Contributing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="authors.html" class="btn btn-neutral float-right" title="Credits" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Van de Wauw Johan, Renders Daan.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>